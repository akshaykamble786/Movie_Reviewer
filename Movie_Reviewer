import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import java.util.Scanner;
import java.util.InputMismatchException;

class Movie {
    String title;
    String director;
    int releaseYear;
    double rating;
    String review;
    boolean inWatchlist;
    Date watchedDate;

    public Movie(String title, String director, int releaseYear, double rating, String review, boolean inWatchlist, Date watchedDate) {
        this.title = title;
        this.director = director;
        this.releaseYear = releaseYear;
        this.rating = rating;
        this.review = review;
        this.inWatchlist = inWatchlist;
        this.watchedDate = watchedDate;
    }
}

class MovieLogger {
    List<Movie> movieList;
    List<Movie> watchlist;
    List<Movie> record;

    public MovieLogger() {
        movieList = new ArrayList<>();
        watchlist = new ArrayList<>();
        record = new ArrayList<>();
    }

    public void addMovie(String title, String director, int releaseYear, double rating, String review, boolean inWatchlist, Date watchedDate) {
        Movie movie = new Movie(title, director, releaseYear, rating, review, inWatchlist, watchedDate);
        movieList.add(movie);

        if (inWatchlist) {
            watchlist.add(movie);
        }

        record.add(movie);
        System.out.println("Movie added successfully!");
    }

    public void listMovies() {
        if (movieList.isEmpty()) {
            System.out.println("No movies added yet.");
        } else {
            System.out.println("Movie List:");
            for (Movie movie : movieList) {
                System.out.println("Title: " + movie.title +
                        ", Director: " + movie.director +
                        ", Release Year: " + movie.releaseYear +
                        ", Rating: " + movie.rating +
                        "/5, Review: " + movie.review);
                        
            }
        }
    }

    public void displayRecord() {
        if (record.isEmpty()) {
            System.out.println("No movies in the record yet.");
        } else {
            System.out.println("Movie Record:");
            for (Movie movie : record) {
                System.out.println("Title: " + movie.title +
                        ", Director: " + movie.director +
                        ", Release Year: " + movie.releaseYear +
                        ", Rating: " + movie.rating +
                        "/5, Review: " + movie.review +
                        ", In Watchlist: " + (movie.inWatchlist ? "Yes" : "No") +
                        (movie.inWatchlist ? ", Watched Date: " + formatDate(movie.watchedDate) : ""));
            }
        }
    }

    private String formatDate(Date date) {
        SimpleDateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy");
        return dateFormat.format(date);
    }
}

class MovieApp {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        MovieLogger movieLogger = new MovieLogger();

        while (true) {
            System.out.println("\n1. Add Movie\n2. List Movies\n3. Display Record\n4. Exit");
            System.out.print("Enter your choice: ");
            int choice = scanner.nextInt();

            switch (choice) {
                case 1:
                    System.out.print("Enter movie title: ");
                    String title = scanner.next();
                    System.out.print("Enter director: ");
                    String director = scanner.next();
                    System.out.print("Enter release year: ");
                    int releaseYear = scanner.nextInt();
                    System.out.print("Enter rating (out of 5): ");
                    double rating = scanner.nextDouble();
                    System.out.print("Enter review: ");
                    String review = scanner.next();
                    System.out.print("Is it in the watchlist? (true/false): ");
                    boolean inWatchlist = scanner.nextBoolean();
                    Date watchedDate = null;
                    if (inWatchlist) {
                        System.out.print("Enter the watched date (MM/dd/yyyy): ");
                        try {
                            watchedDate = new SimpleDateFormat("MM/dd/yyyy").parse(scanner.next());
                        } catch (Exception e) {
                            System.out.println("Invalid date format. Movie added without watched date.");
                        }
                    }

                    movieLogger.addMovie(title, director, releaseYear, rating, review, inWatchlist, watchedDate);
                    break;

                case 2:
                    movieLogger.listMovies();
                    break;

                case 3:
                    movieLogger.displayRecord();
                    break;

                case 4:
                    System.out.println("Exiting the Movie App. Goodbye!");
                    System.exit(0);
                    break;

                default:
                    System.out.println("Invalid choice. Please try again.");
            }
           
        }
    }
}
